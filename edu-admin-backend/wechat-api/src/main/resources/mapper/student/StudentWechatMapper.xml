<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eduadmin.wechat.mapper.StudentWechatMapper">
  <select id="findStudentIdByOpenid" parameterType="string" resultType="long">
    SELECT student_id FROM student_wechat WHERE openid = #{openid} LIMIT 1
  </select>

  <insert id="insertBinding" parameterType="com.eduadmin.wechat.domain.StudentWechatBinding" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO student_wechat(student_id, openid, unionid, created_at)
    VALUES(#{studentId}, #{openid}, #{unionid}, NOW())
  </insert>
</mapper>