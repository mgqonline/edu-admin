import{n as c,_ as d}from"./index-67337038.js";const h={name:"TeacherPage",components:{V2SimpleDate:()=>d(()=>import("./V2SimpleDate-11821f76.js"),["assets/V2SimpleDate-11821f76.js","assets/index-67337038.js","assets/index-f5f188af.css","assets/V2SimpleDate-9b3aafb8.css"])},data(){return{loading:!1,list:[],staffList:[],campusOptions:[],subjectOptions:[],classOptions:[],filters:{q:"",status:""},columns:[{title:"姓名",dataIndex:"name",key:"name"},{title:"性别",dataIndex:"gender",key:"gender"},{title:"手机号",dataIndex:"mobile",key:"mobile"},{title:"部门",dataIndex:"dept",key:"dept",scopedSlots:{customRender:"dept"}},{title:"校区",dataIndex:"campus",key:"campus",scopedSlots:{customRender:"campus"}},{title:"等级",dataIndex:"level",key:"level"},{title:"科目",dataIndex:"subjects",key:"subjects"},{title:"班级",dataIndex:"classes",key:"classes"},{title:"课时费",dataIndex:"hourlyRate",key:"hourlyRate"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],teacherModal:{visible:!1,form:{id:"",name:"",gender:"",mobile:"",joinDate:null,campusId:null,deptId:null,level:"",qualificationCertNo:"",trainingExperience:"",staffId:null,subjects:"",classes:"",hourlyRate:null}},subjectsTemp:[],classesTemp:[],subjectsModal:{visible:!1,form:{id:"",subjectsArr:[]}},classesModal:{visible:!1,form:{id:"",classesArr:[]}},rateModal:{visible:!1,form:{id:"",hourlyRate:null}},deptTree:[],flatDepts:[],pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}}},created(){this.loadCampusOptions(),this.loadDeptOptions(),this.loadStaff(),this.loadSubjectOptions(),this.loadClassOptions(),this.loadTeachers()},watch:{"teacherModal.form.level"(s){this.suggestHourlyRate()},"teacherModal.form.campusId"(s){this.suggestHourlyRate(),this.loadClassOptions(s),this.loadDeptOptions(s)}},methods:{noop(){},async loadCampusOptions(){try{const e=await(await fetch("/api/base/campus/list")).json();this.campusOptions=e&&e.code===200?(e.data||[]).map(t=>({id:t.id,name:t.name})):[]}catch{this.campusOptions=[]}},async loadTeachers(){this.loading=!0;try{const s=new URLSearchParams;this.filters.q&&s.append("q",this.filters.q),this.filters.status&&s.append("status",this.filters.status),s.append("page",String(this.pagination.current||1)),s.append("size",String(this.pagination.pageSize||10));const t=await(await fetch(`/api/teacher/list?${s.toString()}`)).json();if(t&&t.code===200){const a=t.data||{},l=Array.isArray(a)?a:a.items||[];this.list=l.map(i=>({id:i.id!=null&&!isNaN(Number(i.id))?Number(i.id):null,name:i.name,staffId:i.staffId||null,gender:i.gender||"",mobile:i.mobile||"",joinDate:i.joinDate||null,campusId:i.campusId||null,campusName:i.campusName||"",deptId:i.deptId||null,deptName:i.deptName||"",level:i.level||"",qualificationCertNo:i.qualificationCertNo||"",trainingExperience:i.trainingExperience||"",subjects:i.subjects||"",classes:i.classes||"",hourlyRate:i.hourlyRate||0,status:i.status||"enabled"})),this.list=this.list.map(i=>({...i,campusName:i.campusName||this.campusNameByRecord(i),deptName:i.deptName||this.deptNameByRecord(i)})),console.log("老师数据：",this.list),this.pagination.total=Number(a.total||l.length)}else this.useFallback()}catch{this.useFallback()}finally{this.loading=!1}},rowKeyOf(s){if(!s)return Math.random().toString(36).slice(2);if(typeof s.id=="number")return s.id;const e=String(s.name||""),t=String(s.mobile||""),a=String(s.joinDate||"");return[e,t,a].filter(Boolean).join("#")||Math.random().toString(36).slice(2)},onTableChange(s){this.pagination.current=s.current,this.pagination.pageSize=s.pageSize,this.loadTeachers()},async loadStaff(){try{const e=await(await fetch("/api/base/staff/list")).json();if(e&&e.code===200){const t=e.data||[];this.staffList=t.map(a=>{const l=a.id!=null?Number(a.id):null,i=a.staffId!=null?Number(a.staffId):null;return{id:!isNaN(l)&&l!=null?l:!isNaN(i)&&i!=null?i:null,name:a.name,deptId:a.deptId||null,deptName:a.deptName||"",campusId:a.campusId||null,campusName:a.campusName||""}})}else this.staffList=[]}catch{this.staffList=[]}},campusNameById(s){const e=this.campusOptions.find(t=>String(t.id)===String(s));return e?e.name:""},campusNameByRecord(s){const e=s&&s.campusId;return this.campusNameById(e)||"-"},deptNameByRecord(s){const e=s&&s.deptId;if(e!=null){const t=this.flatDepts.find(a=>String(a.id)===String(e));if(t)return t.title}return"-"},onSearch(){this.loadTeachers()},useFallback(){this.list=[{id:"t1",name:"王老师",gender:"男",mobile:"13800000000",joinDate:"2024-09-01",campusId:1,level:"中级",qualificationCertNo:"CERT-001",trainingExperience:"2023 培训",subjects:"语文,数学",classes:"一年级一班",hourlyRate:150,status:"enabled"},{id:"t2",name:"赵老师",gender:"女",mobile:"13900000000",joinDate:"2024-06-01",campusId:2,level:"初级",qualificationCertNo:"CERT-002",trainingExperience:"2022 培训",subjects:"英语",classes:"一年级二班",hourlyRate:120,status:"disabled"}]},openTeacherModal(){this.teacherModal.visible=!0,this.teacherModal.form={id:"",name:"",gender:"",mobile:"",joinDate:null,campusId:null,deptId:null,level:"",qualificationCertNo:"",trainingExperience:"",staffId:null,subjects:"",classes:"",hourlyRate:null},this.subjectsTemp=[],this.classesTemp=[],this.teacherModal.form.campusId&&this.loadDeptOptions(this.teacherModal.form.campusId)},async editTeacher(s){if(!s||typeof s.id!="number"){this.$message&&this.$message.warning("无效记录");return}try{const t=await(await fetch(`/api/teacher/detail/${s.id}`)).json(),a=t&&t.code===200?t.data||{}:this.normalizeTeacherRecord(s)||{},l=this.normalizeTeacherRecord(a);this.teacherModal.visible=!0,this.teacherModal.form={id:l.id,name:l.name,gender:l.gender||"",mobile:l.mobile||"",joinDate:l.joinDate||null,campusId:l.campusId||null,deptId:l.deptId||null,level:l.level||"",qualificationCertNo:l.qualificationCertNo||"",trainingExperience:l.trainingExperience||"",staffId:l.staffId||null,subjects:l.subjects||"",classes:l.classes||"",hourlyRate:l.hourlyRate!=null?Number(l.hourlyRate):null},this.subjectsTemp=this.splitStrToArr(l.subjects),this.classesTemp=this.splitStrToArr(l.classes),this.teacherModal.form.campusId&&this.loadDeptOptions(this.teacherModal.form.campusId)}catch{const t=this.normalizeTeacherRecord(s);this.teacherModal.visible=!0,this.teacherModal.form={id:t.id,name:t.name,gender:t.gender||"",mobile:t.mobile||"",joinDate:t.joinDate||null,campusId:t.campusId||null,deptId:t.deptId||null,level:t.level||"",qualificationCertNo:t.qualificationCertNo||"",trainingExperience:t.trainingExperience||"",staffId:t.staffId||null,subjects:t.subjects||"",classes:t.classes||"",hourlyRate:t.hourlyRate!=null?Number(t.hourlyRate):null},this.subjectsTemp=this.splitStrToArr(t.subjects),this.classesTemp=this.splitStrToArr(t.classes),this.teacherModal.form.campusId&&this.loadDeptOptions(this.teacherModal.form.campusId)}},closeTeacherModal(){this.teacherModal.visible=!1},async saveTeacher(){const s={...this.teacherModal.form,subjects:(this.subjectsTemp||[]).join(","),classes:(this.classesTemp||[]).join(",")};try{const e=s.id?`/api/teacher/update/${s.id}`:"/api/teacher/save",t=s.id?"PUT":"POST",l=await(await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(l&&l.code===200)this.closeTeacherModal(),this.loadTeachers(),this.$message&&this.$message.success("教师信息已保存");else throw new Error("保存失败")}catch{this.closeTeacherModal(),this.loadTeachers(),this.$message&&this.$message.error("保存失败，已回滚至列表")}},onCampusChange(){const s=this.teacherModal.form.campusId;this.loadClassOptions(s),this.loadDeptOptions(s),this.teacherModal.form.deptId&&(this.flatDepts.find(t=>String(t.id)===String(this.teacherModal.form.deptId))||(this.teacherModal.form.deptId=null))},onStaffChange(s){const e=this.staffList.find(t=>String(t.id)===String(s));e&&(e.campusId!=null&&(this.teacherModal.form.campusId=e.campusId,this.loadDeptOptions(e.campusId)),e.deptId!=null&&(this.teacherModal.form.deptId=e.deptId))},onSubjectsChange(s){this.subjectsTemp=Array.isArray(s)?s:[]},onClassesChange(s){this.classesTemp=Array.isArray(s)?s:[]},openSubjectsModal(s){this.subjectsModal.visible=!0,this.subjectsModal.form={id:s.id,subjectsArr:this.splitStrToArr(s.subjects)}},closeSubjectsModal(){this.subjectsModal.visible=!1},async saveSubjects(){const{id:s,subjectsArr:e}=this.subjectsModal.form,t=(e||[]).join(",");try{await this.ensureSubjectsInDict(e||[]);const l=await(await fetch(`/api/teacher/update/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:t})})).json();if(l&&l.code===200)this.closeSubjectsModal(),this.loadTeachers(),this.$message&&this.$message.success("科目已更新");else throw new Error("更新失败")}catch{this.closeSubjectsModal(),this.loadTeachers(),this.$message&&this.$message.error("更新失败，已回滚至列表")}},openClassesModal(s){this.classesModal.visible=!0,this.classesModal.form={id:s.id,classesArr:this.splitStrToArr(s.classes)}},closeClassesModal(){this.classesModal.visible=!1},async saveClasses(){const{id:s,classesArr:e}=this.classesModal.form,t=(e||[]).join(",");try{await this.ensureClassesInDict(e||[]);const l=await(await fetch(`/api/teacher/update/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({classes:t})})).json();if(l&&l.code===200)this.closeClassesModal(),this.loadTeachers(),this.$message&&this.$message.success("班级已更新");else throw new Error("更新失败")}catch{this.closeClassesModal(),this.loadTeachers(),this.$message&&this.$message.error("更新失败，已回滚至列表")}},async loadSubjectOptions(){try{const e=await(await fetch("/api/dict/subject/list?status=enabled")).json();this.subjectOptions=e&&e.code===200?e.data||[]:[]}catch{this.subjectOptions=[]}},async loadClassOptions(s){try{const e=new URLSearchParams;e.append("status","enabled"),s&&e.append("campusId",s);const a=await(await fetch(`/api/class/info/list?${e.toString()}`)).json();let l=[];if(a&&a.code===200){const i=a.data;Array.isArray(i)?l=i:i&&Array.isArray(i.items)&&(l=i.items)}this.classOptions=l}catch{this.classOptions=[]}},splitStrToArr(s){if(!s)return[];const e=String(s).split(/[,，;；\s]+/).map(t=>t.trim()).filter(Boolean);return Array.from(new Set(e))},async ensureSubjectsInDict(s){const e=new Set(this.subjectOptions.map(t=>t.name));for(const t of s)if(!e.has(t))try{await fetch("/api/dict/subject/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,status:"enabled"})})}catch{}await this.loadSubjectOptions()},async ensureClassesInDict(s){const e=new Set(this.classOptions.map(t=>t.name));for(const t of s)if(!e.has(t))try{await fetch("/api/class/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,status:"enabled"})})}catch{}await this.loadClassOptions()},async loadDeptOptions(s){try{const e=s?`?campusId=${s}`:"",a=await(await fetch(`/api/base/dept/tree${e}`)).json();if(a&&a.code===200){const l=a.data||[];this.deptTree=l;const i=[],o=n=>n.forEach(r=>{i.push({id:r.id,title:r.title}),r.children&&r.children.length&&o(r.children)});o(l),this.flatDepts=i}else this.deptTree=[],this.flatDepts=[]}catch{this.deptTree=[],this.flatDepts=[]}},normalizeTeacherRecord(s){const e={...s};if(e.campusId!=null){const t=Number(e.campusId);e.campusId=Number.isNaN(t)?e.campusId:t}if(e.hourlyRate!=null){const t=Number(e.hourlyRate);e.hourlyRate=Number.isNaN(t)?e.hourlyRate:t}if(e.joinDate!=null&&typeof e.joinDate=="number")try{const t=new Date(e.joinDate),a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");e.joinDate=`${a}-${l}-${i}`}catch{}return e},async suggestHourlyRate(){try{const s=this.teacherModal.form.level;if(!s)return;const e=this.teacherModal.form.campusId,t=new URLSearchParams;t.append("teacherLevel",s),e&&t.append("campusId",e);const l=await(await fetch(`/api/teacher/fee/rule/suggest?${t.toString()}`)).json();if(l&&l.code===200&&l.data&&l.data.baseFeePerLesson!=null){const i=this.teacherModal.form.hourlyRate;(i==null||Number(i)===0)&&(this.teacherModal.form.hourlyRate=Number(l.data.baseFeePerLesson))}}catch{const e={初级:100,中级:120,高级:150},t=this.teacherModal.form.hourlyRate;(t==null||Number(t)===0)&&(this.teacherModal.form.hourlyRate=e[this.teacherModal.form.level]||120)}},openRateModal(s){this.rateModal.visible=!0,this.rateModal.form={id:s.id,hourlyRate:s.hourlyRate}},closeRateModal(){this.rateModal.visible=!1},async saveRate(){const{id:s,hourlyRate:e}=this.rateModal.form;try{const a=await(await fetch(`/api/teacher/update/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({hourlyRate:e})})).json();if(a&&a.code===200)this.closeRateModal(),this.loadTeachers(),this.$message&&this.$message.success("课时费已更新");else throw new Error("更新失败")}catch{this.closeRateModal(),this.loadTeachers(),this.$message&&this.$message.error("更新失败，已回滚至列表")}},async removeTeacher(s){if(!s||typeof s.id!="number"){this.$message&&this.$message.error("删除失败或已取消");return}const e=async()=>{const a=await(await fetch(`/api/teacher/delete/${s.id}`,{method:"DELETE"})).json();if(a&&a.code===200)this.$message&&this.$message.success("已删除"),await this.loadTeachers();else throw new Error("删除失败")};this.$confirm({title:"确认删除该教师？",content:`删除后不可恢复：${s.name}`,onOk:()=>new Promise(async t=>{try{await e(),t()}catch{this.$message&&this.$message.error("删除失败或已取消"),t()}})})},async toggleStatus(s){if(!s||typeof s.id!="number"||typeof s.status>"u"){this.$message&&this.$message.warning("当前行数据无效，无法切换状态");return}const e=s.status==="enabled"?"disabled":"enabled";try{const a=await(await fetch(`/api/teacher/update/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).json();a&&a.code===200?(s.status=e,this.$message&&this.$message.success("状态已更新")):(s.status=e,this.$message&&this.$message.warning("状态更新接口不可用，已在前端切换"))}catch{s.status=e,this.$message&&this.$message.error("状态更新失败，已在前端切换")}},beforeUploadTeacherExcel(s){const e=new FormData;return e.append("file",s),fetch("/api/teacher/import/excel",{method:"POST",body:e}).then(t=>t.json()).then(t=>{t&&t.code===200?(this.$message&&this.$message.success(`导入成功 ${t.data.success} 条，失败 ${t.data.failed} 条`),t.data.errors&&t.data.errors.length&&console.warn("导入错误",t.data.errors),this.loadTeachers()):this.$message&&this.$message.error("导入失败")}).catch(()=>{this.$message&&this.$message.error("导入请求失败")}),!1},async enableAll(){if(!(!Array.isArray(this.list)||!this.list.length))try{let s=!1;try{const t=await(await fetch("/api/teacher/status/enable-all",{method:"POST"})).json().catch(()=>null);s=!!(t&&(t.code===200||t.status===200))}catch{s=!1}if(!s){const e=this.list.filter(t=>t&&t.id!=null&&t.status!=="enabled").map(t=>fetch(`/api/teacher/update/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"enabled"})}));await Promise.all(e)}this.$message&&this.$message.success("已将全部教师设置为启用"),await this.loadTeachers()}catch{this.$message&&this.$message.error("批量启用失败")}}}};var m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"teacher-page"},[t("a-page-header",{attrs:{title:"教师管理","sub-title":"科目、班级与课时费设置"}}),t("a-card",{attrs:{bordered:""}},[t("a-space",{staticStyle:{"margin-bottom":"12px"},attrs:{wrap:""}},[t("a-button",{directives:[{name:"perm",rawName:"v-perm",value:"base:teacher:add",expression:"'base:teacher:add'"}],attrs:{type:"primary"},on:{click:e.openTeacherModal}},[e._v("新增教师")]),t("a-upload",{attrs:{showUploadList:!1,beforeUpload:e.beforeUploadTeacherExcel}},[t("a-button",[e._v("导入Excel")])],1),t("a-input-search",{staticStyle:{width:"220px"},attrs:{placeholder:"按姓名搜索",allowClear:""},on:{search:e.onSearch},model:{value:e.filters.q,callback:function(a){e.$set(e.filters,"q",a)},expression:"filters.q"}}),t("a-select",{staticStyle:{width:"160px"},attrs:{placeholder:"状态筛选",allowClear:""},on:{change:e.onSearch},model:{value:e.filters.status,callback:function(a){e.$set(e.filters,"status",a)},expression:"filters.status"}},[t("a-select-option",{attrs:{value:"enabled"}},[e._v("启用")]),t("a-select-option",{attrs:{value:"disabled"}},[e._v("停用")])],1),t("a-button",{attrs:{loading:e.loading},on:{click:e.loadTeachers}},[e._v("查询")])],1),t("a-table",{attrs:{"data-source":e.list,columns:e.columns,rowKey:e.rowKeyOf,pagination:e.pagination},on:{change:e.onTableChange},scopedSlots:e._u([{key:"status",fn:function(a,l,i){return[t("a-tag",{attrs:{color:(l&&l.status)==="enabled"?"green":"red"}},[e._v(" "+e._s((l&&l.status)==="enabled"?"启用":"停用")+" ")])]}},{key:"campus",fn:function(a,l){return[e._v(" "+e._s(l.campusName)+" ")]}},{key:"dept",fn:function(a,l){return[e._v(" "+e._s(l.deptName)+" ")]}},{key:"action",fn:function(a,l,i){return[t("a-space",[t("a-button",{directives:[{name:"perm",rawName:"v-perm",value:"base:teacher:edit",expression:"'base:teacher:edit'"}],attrs:{size:"small"},on:{click:function(o){return e.editTeacher(l)}}},[e._v("编辑")]),t("a-button",{directives:[{name:"perm",rawName:"v-perm",value:"base:teacher:toggle",expression:"'base:teacher:toggle'"}],attrs:{size:"small",type:"danger",disabled:!l||typeof l.id!="number"},on:{click:function(o){l&&e.toggleStatus(l)}}},[e._v(e._s((l&&l.status)==="enabled"?"停用":"启用"))]),t("a-button",{directives:[{name:"perm",rawName:"v-perm",value:"base:teacher:edit",expression:"'base:teacher:edit'"}],attrs:{size:"small",type:"danger",disabled:!l||typeof l.id!="number",ghost:""},on:{click:function(o){return e.removeTeacher(l)}}},[e._v("删除")])],1)]}}])})],1),t("a-modal",{attrs:{visible:e.teacherModal.visible,title:"教师信息"},on:{ok:e.saveTeacher,cancel:e.closeTeacherModal}},[t("a-form",{attrs:{"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-form-item",{attrs:{label:"姓名"}},[t("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.teacherModal.form.name,callback:function(a){e.$set(e.teacherModal.form,"name",a)},expression:"teacherModal.form.name"}})],1),t("a-form-item",{attrs:{label:"性别"}},[t("a-select",{attrs:{placeholder:"选择性别",allowClear:""},model:{value:e.teacherModal.form.gender,callback:function(a){e.$set(e.teacherModal.form,"gender",a)},expression:"teacherModal.form.gender"}},[t("a-select-option",{attrs:{value:"男"}},[e._v("男")]),t("a-select-option",{attrs:{value:"女"}},[e._v("女")])],1)],1),t("a-form-item",{attrs:{label:"手机号"}},[t("a-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.teacherModal.form.mobile,callback:function(a){e.$set(e.teacherModal.form,"mobile",a)},expression:"teacherModal.form.mobile"}})],1),t("a-form-item",{attrs:{label:"入职日期"}},[t("V2SimpleDate",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD"},model:{value:e.teacherModal.form.joinDate,callback:function(a){e.$set(e.teacherModal.form,"joinDate",a)},expression:"teacherModal.form.joinDate"}})],1),t("a-form-item",{attrs:{label:"所属校区"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择校区",allowClear:""},on:{change:e.onCampusChange},model:{value:e.teacherModal.form.campusId,callback:function(a){e.$set(e.teacherModal.form,"campusId",a)},expression:"teacherModal.form.campusId"}},e._l(e.campusOptions,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name))])}),1)],1),t("a-form-item",{attrs:{label:"所属部门"}},[t("a-select",{attrs:{placeholder:"选择部门",allowClear:"",disabled:!e.flatDepts.length},model:{value:e.teacherModal.form.deptId,callback:function(a){e.$set(e.teacherModal.form,"deptId",a)},expression:"teacherModal.form.deptId"}},e._l(e.flatDepts,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.title))])}),1)],1),t("a-form-item",{attrs:{label:"教师等级"}},[t("a-select",{attrs:{placeholder:"选择等级",allowClear:""},model:{value:e.teacherModal.form.level,callback:function(a){e.$set(e.teacherModal.form,"level",a)},expression:"teacherModal.form.level"}},[t("a-select-option",{attrs:{value:"初级"}},[e._v("初级")]),t("a-select-option",{attrs:{value:"中级"}},[e._v("中级")]),t("a-select-option",{attrs:{value:"高级"}},[e._v("高级")])],1)],1),t("a-form-item",{attrs:{label:"资格证号"}},[t("a-input",{attrs:{placeholder:"请输入教师资格证号"},model:{value:e.teacherModal.form.qualificationCertNo,callback:function(a){e.$set(e.teacherModal.form,"qualificationCertNo",a)},expression:"teacherModal.form.qualificationCertNo"}})],1),t("a-form-item",{attrs:{label:"培训经历"}},[t("a-input",{attrs:{placeholder:"请输入培训经历"},model:{value:e.teacherModal.form.trainingExperience,callback:function(a){e.$set(e.teacherModal.form,"trainingExperience",a)},expression:"teacherModal.form.trainingExperience"}})],1),t("a-divider"),t("a-form-item",{attrs:{label:"关联员工"}},[t("a-select",{attrs:{placeholder:"选择员工",allowClear:""},on:{change:e.onStaffChange},model:{value:e.teacherModal.form.staffId,callback:function(a){e.$set(e.teacherModal.form,"staffId",a)},expression:"teacherModal.form.staffId"}},e._l(e.staffList,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name)+"（"+e._s(a.deptName||"-")+"）")])}),1)],1),t("a-form-item",{attrs:{label:"科目"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags","token-separators":[",","，",";","；"," "],options:e.subjectOptions.map(a=>({value:a.name,label:a.name})),placeholder:"选择或输入科目，回车或分隔符新增"},on:{change:e.onSubjectsChange},model:{value:e.subjectsTemp,callback:function(a){e.subjectsTemp=a},expression:"subjectsTemp"}})],1),t("a-form-item",{attrs:{label:"班级"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags","token-separators":[",","，",";","；"," "],options:e.classOptions.map(a=>({value:a.name,label:a.name})),placeholder:"选择或输入班级，回车或分隔符新增"},on:{change:e.onClassesChange},model:{value:e.classesTemp,callback:function(a){e.classesTemp=a},expression:"classesTemp"}})],1),t("a-form-item",{attrs:{label:"课时费"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"根据校区与等级自动建议，可手动改"},model:{value:e.teacherModal.form.hourlyRate,callback:function(a){e.$set(e.teacherModal.form,"hourlyRate",a)},expression:"teacherModal.form.hourlyRate"}})],1)],1)],1),t("a-modal",{attrs:{visible:e.subjectsModal.visible,title:"设置科目"},on:{ok:e.saveSubjects,cancel:e.closeSubjectsModal}},[t("a-form",{attrs:{"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-form-item",{attrs:{label:"科目"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags","token-separators":[",","，",";","；"," "],options:e.subjectOptions.map(a=>({value:a.name,label:a.name})),placeholder:"选择或输入科目，回车或分隔符新增"},model:{value:e.subjectsModal.form.subjectsArr,callback:function(a){e.$set(e.subjectsModal.form,"subjectsArr",a)},expression:"subjectsModal.form.subjectsArr"}})],1)],1)],1),t("a-modal",{attrs:{visible:e.classesModal.visible,title:"设置班级"},on:{ok:e.saveClasses,cancel:e.closeClassesModal}},[t("a-form",{attrs:{"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-form-item",{attrs:{label:"班级"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags","token-separators":[",","，",";","；"," "],options:e.classOptions.map(a=>({value:a.name,label:a.name})),placeholder:"选择或输入班级，回车或分隔符新增"},model:{value:e.classesModal.form.classesArr,callback:function(a){e.$set(e.classesModal.form,"classesArr",a)},expression:"classesModal.form.classesArr"}})],1)],1)],1),t("a-modal",{attrs:{visible:e.rateModal.visible,title:"设置课时费单价"},on:{ok:e.saveRate,cancel:e.closeRateModal}},[t("a-form",{attrs:{"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-form-item",{attrs:{label:"课时费"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.rateModal.form.hourlyRate,callback:function(a){e.$set(e.rateModal.form,"hourlyRate",a)},expression:"rateModal.form.hourlyRate"}})],1)],1)],1)],1)},u=[],p=c(h,m,u,!1,null,null,null,null);const b=p.exports;export{b as default};
