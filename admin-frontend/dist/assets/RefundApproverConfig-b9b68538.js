import{n as s}from"./index-67337038.js";const o={name:"RefundApproverConfig",data(){return{form:{level1:"",level2:"",finance:""}}},methods:{toCsv(t){return Array.isArray(t)?t.join(","):""},toArr(t){return(t||"").split(",").map(e=>Number(e.trim())).filter(e=>Number.isFinite(e))},async load(){try{const e=await(await fetch("/api/finance/refund/approver/config")).json(),r=e&&e.data;r&&(this.form.level1=this.toCsv(r.level1ApproverIds||[]),this.form.level2=this.toCsv(r.level2ApproverIds||[]),this.form.finance=this.toCsv(r.financeApproverIds||[]))}catch{this.$message&&this.$message.error("加载失败")}},async save(){const t={level1ApproverIds:this.toArr(this.form.level1),level2ApproverIds:this.toArr(this.form.level2),financeApproverIds:this.toArr(this.form.finance)};try{const r=await(await fetch("/api/finance/refund/approver/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(r&&r.code==="ok")this.$message&&this.$message.success("保存成功");else throw new Error("失败")}catch{this.$message&&this.$message.error("保存失败")}}},created(){this.load()}};var n=function(){var e=this,r=e._self._c;return r("div",{staticClass:"refund-approver-config"},[r("a-page-header",{attrs:{title:"审批人配置","sub-title":"配置退费审批各级审批人ID"}}),r("a-card",{attrs:{bordered:""}},[r("a-form",{attrs:{"label-col":{span:6},"wrapper-col":{span:12}}},[r("a-form-item",{attrs:{label:"一审审批人ID列表"}},[r("a-input",{attrs:{placeholder:"如：101,102"},model:{value:e.form.level1,callback:function(a){e.$set(e.form,"level1",a)},expression:"form.level1"}})],1),r("a-form-item",{attrs:{label:"二审审批人ID列表"}},[r("a-input",{attrs:{placeholder:"如：201,202"},model:{value:e.form.level2,callback:function(a){e.$set(e.form,"level2",a)},expression:"form.level2"}})],1),r("a-form-item",{attrs:{label:"财务审批人ID列表"}},[r("a-input",{attrs:{placeholder:"如：301,302"},model:{value:e.form.finance,callback:function(a){e.$set(e.form,"finance",a)},expression:"form.finance"}})],1),r("a-form-item",{attrs:{"wrapper-col":{span:12,offset:6}}},[r("a-space",[r("a-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),r("a-button",{on:{click:e.load}},[e._v("刷新")])],1)],1)],1),r("a-alert",{staticStyle:{"margin-top":"12px"},attrs:{type:"info","show-icon":"",message:"说明",description:"填写逗号分隔的用户ID列表。审批时必须从配置列表中选择审批人，若未配置将无法通过相应级别的审批。"}})],1)],1)},i=[],l=s(o,n,i,!1,null,"f74467f0",null,null);const f=l.exports;export{f as default};
