<scroll-view class="page-scroll p-24" scroll-y="true">
  <block wx:if="{{role === 'teacher'}}">
    <view class="hero">
      <view class="hero-title">教学管理</view>
      <view class="hero-subtitle">成绩登记与课堂管理</view>
      <view class="chips">
        <view class="chip">今日登记：{{submittedCount}} 次</view>
      </view>
    </view>
    <view class="card">
      <view class="card-title">成绩管理</view>
      <form bindsubmit="onSubmit" report-submit="true">
        <view class="weui-cells weui-cells_form">
          <view class="weui-cell">
            <view class="weui-cell__bd"><input name="studentId" class="weui-input" placeholder="学员ID" value="{{studentId}}" /></view>
          </view>
          <view class="weui-cell">
            <view class="weui-cell__bd"><input name="course" class="weui-input" placeholder="课程名称" value="{{course}}" /></view>
          </view>
          <view class="weui-cell">
            <view class="weui-cell__bd"><input name="type" class="weui-input" placeholder="测试类型" value="{{type}}" /></view>
          </view>
          <view class="weui-cell">
            <view class="weui-cell__bd"><input name="score" class="weui-input" placeholder="分数" type="number" value="{{score}}" /></view>
          </view>
        </view>
        <button class="weui-btn weui-btn_primary" formType="submit" loading="{{submitting}}">提交</button>
      </form>
    </view>
  </block>
  <block wx:else>
    <view class="hero">
      <view class="hero-title">学情报告</view>
      <view class="hero-subtitle">学习进度与成绩概览</view>
      <view class="chips">
        <view class="chip">待交作业：{{pendingHomework}} 条</view>
        <view class="chip">平均成绩：{{avgScore}} 分</view>
      </view>
    </view>

    <view class="section-title">作业查看与提交</view>
    <view class="card mb-24">
      <block wx:for="{{homework}}" wx:key="id">
        <view class="weui-cells">
          <view class="weui-cell">
            <view class="weui-cell__bd">
              <view>{{item.title}}</view>
              <view class="list-meta">截止：{{item.dueDate}}</view>
            </view>
            <view class="weui-cell__ft">
              <button class="weui-btn weui-btn_primary" bindtap="uploadPhoto" data-id="{{item.id}}">上传照片</button>
            </view>
          </view>
        </view>
      </block>
      <view class="empty" wx:if="{{homework.length===0}}">暂无作业</view>
    </view>

    <view class="section-title">成绩查询</view>
    <view class="card">
      <block wx:for="{{grades}}" wx:key="id">
        <view class="weui-cells">
          <view class="weui-cell">
            <view class="weui-cell__bd">
              <view>{{item.course}}</view>
              <view class="list-meta">{{item.type}} 成绩：{{item.score}}</view>
            </view>
          </view>
        </view>
      </block>
      <view class="empty" wx:if="{{grades.length===0}}">暂无成绩</view>
    </view>
  </block>
</scroll-view>