<view class="p-24">
  <view class="card mb-24">
    <view class="card-title">今日课表</view>
    <view class="card-actions">
      <button class="btn-secondary" size="mini" bindtap="loadToday">刷新</button>
    </view>
    <view wx:if="{{loading}}" class="skeleton mt-16"></view>
    <view wx:if="{{!loading && today.length === 0}}" class="empty">今日暂无课程</view>
    <block wx:for="{{today}}" wx:key="index">
      <view class="list-item">
        <image class="list-icon" src="../../assets/tab-schedule.png" />
        <view class="list-text">
          <view class="fs-32">{{item.className}}</view>
          <view class="list-meta">{{item.date}} {{item.startTime}}-{{item.endTime}} | {{item.room || ''}}</view>
        </view>
        <view>
          <button class="btn-primary" size="mini" bindtap="scanSign" data-id="{{item.classId}}">扫码签到</button>
        </view>
      </view>
    </block>
  </view>

  <view class="card">
    <view class="card-title">本周课表</view>
    <view class="card-actions">
      <button class="btn-secondary" size="mini" bindtap="loadWeek">刷新</button>
    </view>
    <view wx:if="{{loadingWeek}}" class="skeleton mt-16"></view>
    <view wx:if="{{!loadingWeek && week.length === 0}}" class="empty">本周暂无课程</view>
    <block wx:for="{{week}}" wx:key="index">
      <view class="list-item">
        <image class="list-icon" src="../../assets/tab-schedule.png" />
        <view class="list-text">
          <view class="fs-28">{{item.className}}</view>
          <view class="list-meta">{{item.date}} {{item.startTime}}-{{item.endTime}} | {{item.room || ''}}</view>
        </view>
      </view>
    </block>
  </view>
</view>